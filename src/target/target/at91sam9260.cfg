# Thanks to Pieter Conradie for this script! 
# Target:    Atmel AT91SAM9260
######################################

reset_config trst_and_srst

#jtag_device <IR length> <IR capture> <IR mask> <IDCODE instruction>
jtag_device 4 0x1 0xf 0xe

jtag_nsrst_delay 200
jtag_ntrst_delay 0

######################
# Target configuration
######################

target create target0 arm926ejs -endian little -chain-position 0 -variant arm926ejs

[new_target_name] configure -event reset-init { script event/at91sam9260_reset.script }

[new_target_name] configure -work-area-virt 0 -work-area-phys 0x00300000 -work-area-size 0x1000 -work-area-backup 1

#####################
# Flash configuration
#####################

#flash bank cfi <base> <size> <chip width> <bus width> <target#>
flash bank cfi 0x10000000 0x01000000 2 2 0

