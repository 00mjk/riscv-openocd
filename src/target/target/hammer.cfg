# Target Configuration for the TinCanTools S3C2410 Based Hammer Module
# http://www.tincantools.com

#use combined on interfaces or targets that can't set TRST/SRST separately
reset_config trst_and_srst

#jtag scan chain
#format L IRC IRCM IDCODE (Length, IR Capture, IR Capture Mask, IDCODE)
jtag_device 4 0x1 0xf 0xe


target create target0 arm920t -endian little -chain-position 0 -variant arm920t
[new_target_name] configure -work-area-virt 0 -work-area-phys 0x30800000 -work-area-size 0x20000 -work-area-backup 0
[new_target_name] configure -event reset-init {
	# Reset Script for the TinCanTools S3C2410 Based Hammer Module
	# http://www.tincantools.com
	#
	# Setup primary clocks and initialize the SDRAM
	mww 0x53000000 0x00000000
	mww 0x4a000008 0xffffffff
	mww 0x4a00000c 0x000007ff
	mww 0x4c000000 0x00ffffff
	mww 0x4c000014 0x00000003
	mww 0x4c000004 0x000a1031
	mww 0x48000000 0x11111122
	mww 0x48000004 0x00000700
	mww 0x48000008 0x00000700
	mww 0x4800000c 0x00000700
	mww 0x48000010 0x00000700
	mww 0x48000014 0x00000700
	mww 0x48000018 0x00000700
	mww 0x4800001c 0x00018005
	mww 0x48000020 0x00018005
	mww 0x48000024 0x009c0459
	mww 0x48000028 0x000000b2
	mww 0x4800002c 0x00000030
	mww 0x48000030 0x00000030
	flash probe 0
}

# speed up memory downloads
arm7_9 fast_memory_access enable
arm7_9 dcc_downloads enable

#flash configuration
#flash bank <driver> <base> <size> <chip_width> <bus_width> [driver_options ...]
flash bank cfi 0x00000000 0x1000000 2 2 0
